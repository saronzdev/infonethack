---
import fs from 'node:fs'
import path from 'node:path'
import matter from 'gray-matter'
import {marked} from 'marked'
import Layout from '../../layouts/Layout.astro'
import '../../styles/posts.css'

const {slug} = Astro.params
const filePath = path.join(process.cwd(), 'src', 'content', 'posts', `${slug}.md`)

if (!fs.existsSync(filePath)) return Astro.redirect('/404')

const raw = fs.readFileSync(filePath, 'utf-8')
const {data, content} = matter(raw)
const html = marked(content)
---

<Layout>
  <div class="post-content flex flex-col justify-center items-center text-white py-4" set:html={html} />
</Layout>